/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','./library','sap/ui/core/Control','sap/ui/core/ResizeHandler','sap/ui/core/Icon','./NavigationList'],function(q,l,C,R,I){'use strict';var S=C.extend('sap.tnt.SideNavigation',{metadata:{library:'sap.tnt',properties:{expanded:{type:'boolean',group:'Misc',defaultValue:true}},defaultAggregation:"item",aggregations:{item:{type:'sap.tnt.NavigationList',multiple:false,bindable:"bindable"},fixedItem:{type:'sap.tnt.NavigationList',multiple:false},footer:{type:'sap.tnt.NavigationList',multiple:false},_topArrowControl:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"},_bottomArrowControl:{type:"sap.ui.core.Icon",multiple:false,visibility:"hidden"}},events:{itemSelect:{parameters:{item:{type:'sap.ui.core.Item'}}}}}});S.prototype.init=function(){this.data('sap-ui-fastnavgroup','true',true);};S.prototype.setAggregation=function(a,o,s){if(o&&o.attachItemSelect){o.attachItemSelect(this._itemSelectionHandler.bind(this));}return sap.ui.base.ManagedObject.prototype.setAggregation.apply(this,arguments);};S.prototype.setExpanded=function(i){if(this.getExpanded()===i){return this;}if(this.getAggregation('item')){this.getAggregation('item').setExpanded(i);}if(this.getAggregation('fixedItem')){this.getAggregation('fixedItem').setExpanded(i);}if(this.getDomRef()){this.getDomRef().classList.toggle('sapTntSideNavigationNotExpanded');}this.setProperty('expanded',i,true);this._toggleArrows();return this;};S.prototype.onBeforeRendering=function(){this._deregisterControl();};S.prototype.onAfterRendering=function(){this._ResizeHandler=R.register(this.getDomRef(),this._toggleArrows.bind(this));this._toggleArrows();};S.prototype.exit=function(){this._deregisterControl();};S.prototype._itemSelectionHandler=function(e){var a=e.getSource().getId();var i=this.getAggregation('item');var f=this.getAggregation('fixedItem');if(i&&f&&a===i.getId()){f.setSelectedItem(null);}if(i&&f&&a===f.getId()){i.setSelectedItem(null);}this.fireItemSelect({item:e.getParameter('item')});};S.prototype._deregisterControl=function(){if(this._ResizeHandler){R.deregister(this._ResizeHandler);this._ResizeHandler=null;}};S.prototype.ontouchmove=function(e){e.setMarked();};S.prototype._getTopArrowControl=function(){var i=this.getAggregation('_topArrowControl');var t=this;if(!i){i=new I({src:'sap-icon://navigation-up-arrow',noTabStop:true,useIconTooltip:false,tooltip:'',press:this._arrowPress.bind(t)}).addStyleClass('sapTntSideNavigationScrollIcon sapTntSideNavigationScrollIconUp');this.setAggregation("_topArrowControl",i,true);}return i;};S.prototype._getBottomArrowControl=function(){var i=this.getAggregation('_bottomArrowControl');var t=this;if(!i){i=new I({src:'sap-icon://navigation-down-arrow',noTabStop:true,useIconTooltip:false,tooltip:'',press:this._arrowPress.bind(t)}).addStyleClass('sapTntSideNavigationScrollIcon sapTntSideNavigationScrollIconDown');this.setAggregation("_bottomArrowControl",i,true);}return i;};S.prototype._toggleArrows=function(){var d=this.getDomRef();if(!d){return;}var s=this.$('Flexible')[0];var a=this.$('Flexible-Content')[0];var i=this.getExpanded();if((a.offsetHeight>s.offsetHeight)&&!i){d.querySelector('.sapTntSideNavigationScrollIconUp').style.display='block';d.querySelector('.sapTntSideNavigationScrollIconDown').style.display='block';d.querySelector('.sapTntSideNavigationScrollIconDown').classList.remove('sapTntSideNavigationScrollIconDisabled');}else{d.querySelector('.sapTntSideNavigationScrollIconUp').style.display='none';d.querySelector('.sapTntSideNavigationScrollIconDown').style.display='none';}};S.prototype._arrowPress=function(e,s){e.preventDefault();var a=document.getElementById(e.oSource.sId);var i=a.classList.contains('sapTntSideNavigationScrollIconDown')?true:false;var $=this.$('Flexible');var s=i?40:-40;$[0].scrollTop+=s;};return S;},true);
